{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/qwc-services/qwc-admin-gui/master/schemas/themeFormSchema.json",
  "title": "Theme Form Schema",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "input": "hidden",
      "label": "Theme ID",
      "description": "Theme identifier. Autogenerated if not specified."
    },
    "url": {
      "type": "string",
      "input": "url",
      "label": "WMS URL",
      "description": "The address of the desired WMS served by QGIS Server."
    },
    "mapCrs": {
      "type": "string",
      "input": "select",
      "label": "Map projection",
      "description": "Map projection. Defaults to defaultMapCrs."
    },
    "title": {
      "type": "string",
      "input": "text",
      "label": "Title",
      "description": "Custom title. Optional, override WMS title."
    },
    "description": {
      "type": "string",
      "input":"text",
      "label": "Description",
      "description": "An additional description to show below the theme title."
    },
    "thumbnail": {
      "type": "string",
      "input":"select",
      "label": "Thumbnail",
      "description": "Image file in assets/img/mapthumbs."
    },
    "attribution": {
      "type": "string",
      "input":"text",
      "label": "Attribution",
      "description": "Attribution shown in the bottom right corner of the map."
    },
    "scales": {
      "type": "array",
      "input": "number",
      "label": "Scales",
      "items": {
        "type": "number"
      },
      "description": "List of allowed map scales."
    },
    "printScales": {
      "type": "array",
      "label": "Print scales",
      "items": {
        "type": "number"
      },
      "description": "List of allowed print scales."
    },
    "printResolutions": {
      "type": "array",
      "input": "number",
      "label": "Print resolutions",
      "items": {
        "type": "number"
      },
      "description": "List of available print resolutions."
    },
    "printGrid":{
      "type": "object",
      "label": "Print grid",
      "properties":{
        "s":{"type": "number", "input": "number"},
        "x":{"type": "number", "input": "number"},
        "y":{"type": "number", "input": "number"}
    },
    "description": "List of grid scale-dependent grid intervals to use when printing. If omitted, defaults to defaultPrintGrid."
    },
    "printLabelForSearchResult":{
      "type": "string",
      "input": "select",
      "label": "Print label for search result",
      "description": "Optional, an ID of a print layout label to which the current search result text (if any) will be written to when printing"
    },
    "printLabelForAttribution":{
      "type": "string",
      "input": "select",
      "label": "Print label for attribution",
      "description": "Optional, an ID of a print layout label to which the current attribution text (if any) will be written to when printing."
    },
    "extent": {
      "type": "array",
      "input": "number",
      "label": "Extent",
      "items": {
        "type": "number"
      },
      "description": "Override theme extent. In mapCrs."
    },
    "tiled": {
      "type": "boolean",
      "input": "checkbox",
      "label": "Tiled",
      "description": "Use tiled WMS. Defaults to false."
    },
    "tileSize":{
      "type": "array",
      "input": "number",
      "label": "Tile size",
      "items": {
        "type": "number"
      },
      "description": "Optional, the WMS tile width and height."
    },
    "format": {
      "type": "string",
      "input": "select",
      "label": "Image format",
      "description": "The format to use for WMS GetMap. Defaults to image/png."
    },
    "externalLayers": {
      "type": "object",
      "label": "External layers",
      "properties": {
        "name": {"type": "string", "input": "text"},
        "internalLayer": {"type": "string", "input": "text"}
      },
      "description": "Optional, external layers to use as replacements for internal layers."
    },
    "themeInfoLinks": {
      "type": "object",
      "label": "Theme info links",
      "properties": {
        "title": {"type": "string", "input": "text"},
        "titleMsgId": {"type": "string", "input": "text"},
        "entries": {"type": "array", "input": "number", "items":{"type": "number"}}
      },
      "description": "Optional, custom links to additional resources, shown as a menu in the theme selector in the theme switcher."
    },
    "backgroundLayers":{
      "type": "object",
      "label": "Background layers",
      "properties": {
        "name": {"type": "string", "input": "select"},
        "printLayer": {"type": "string", "input": "text"},
        "visibility": {"type": "boolean", "input": "radio"},
        "overview": {"type": "boolean", "input": "radio"}
      },
      "description": "Optional, list of available background layers, defaults to defaultBackgroundLayers."
    },
    "searchProviders": {
      "type": "object",
      "label": "Search providers",
      "properties": {
        "provider": {
          "type": "string",
          "input": "text"
        },
        "qgisSearch":{
          "type": "object",
          "properties": {
            "provider": {
              "type": "string",
              "input": "text"
            },
            "params": {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "input": "text"
                },
                "featureCount": {
                  "type": "number",
                  "input": "number"
                },
                "resultTitle": {
                  "type": "string",
                  "input": "text"
                },
                "description": {
                  "type": "string",
                  "input": "text"
                },
                "default": {
                  "type": "boolean",
                  "input": "radio"
                },
                "group":{
                  "type": "string",
                  "input": "text"
                },
                "expression": {
                  "type": "object",
                  "properties": {
                    "layername": {
                      "type": "string",
                      "input": "text"
                    },
                    "query": {
                      "type": "string",
                      "input": "text"
                    }
                  }
                }
              }
            },
            "fields": {
              "type": "object",
              "properties": {
                "fieldName": {
                  "type":"string",
                  "input": "text"
                },
                "fieldOptions":{
                  "type":"object",
                  "properties": {
                    "label": {
                      "type":"string",
                      "input": "text"
                    },
                    "type":{
                      "type": "string",
                      "input": "select"
                    },
                    "options":{
                      "type":"array",
                      "input":"text",
                      "items":{
                        "type":"string"
                      }
                    }
                  }
                }
                
              }
            }
          }
        }
      },
      "description": "List of search providers."
    },
    "additionalMouseCrs": {
      "type": "array",
      "input": "text",
      "label": "Additional mouse projections",
      "items": {
        "type": "string"
      },
      "description": "Optional, list of additional projections for displaying the mouse position. WGS84 and mapCrs are available by default. Additional projections definitions must be added to config.json."
    },
    "watermark": {
      "type": "object",
      "label": "Watermark",
      "properties": {
        "text": {
          "type": "string"
        },
        "fontsize": {
          "type": "number"
        },
        "fontcolor": {
          "type": "string",
          "pattern": "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"
        },
        "backgroundcolor": {
          "type": "string",
          "pattern": "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"
        },
        "framecolor": {
          "type": "string",
          "pattern": "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"
        },
        "framewidth": {
          "type": "number"
        }
      },
      "description": "Configuration of watermark to add to raster export images."
    },
    "collapseLayerGroupsBelowLevel": {
      "type": "number",
      "input": "number",
      "label": "Collapse layer groups below level",
      "description": "Optional, layer tree level below which to initially collapse groups. By default the tree is completely expanded."
    },
    "skipEmptyFeatureAttributes": {
      "type": "boolean",
      "input": "checkbox",
      "label": "Skip empty feature attributes",
      "description": "Optional, whether to skip empty attributes in the identify results. Default is false."
    },
    "mapTips": {
      "type": "boolean",
      "input": "checkbox",
      "label": "Map tips",
      "description": "Optional, per-theme setting whether map-tips are unavailable (null), disabled by default (false) or enabled by default (true)."
    },
    "extraLegendParameters": {
      "type": "string",
      "input": "text",
      "label": "Extra legend parameters",
      "description": "Optional, additional query parameters to append to GetLegendGraphic request."
    },
    "extraDxfParameters": {
      "type": "string",
      "input": "text",
      "label": "Extra DXF parameters",
      "description": "Optional, additional query parameters to append to DXF export request."
    },
    "extraPrintParameters": {
      "type": "string",
      "input": "text",
      "label": "Extra print parameters",
      "description": "Optional, additional query parameters to append to GetPrint request (requires QGIS Server >= 3.32.0)."
    },
    "extraPrintLayers": {
      "type": "array",
      "label": "Extra print layers",
      "items": {
        "type": "string"
      },
      "description": "Optional, extra list of layers to mark as internal print layers, i.e. which are omitted from the QWC2 LayerTree."
    },
    "printLabelBlacklist": {
      "type": "array",
      "label": "Print label blacklist",
      "items": {
        "type": "string"
      },
      "description": "Optional, list of composer label ids to not expose in the print dialog."
    }
  },
  "required": ["id", "url"]
}
